{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/peter/OneDrive/\\xC1rea de Trabalho/TRABALHO FT/tinder-0/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/peter/OneDrive/\\xC1rea de Trabalho/TRABALHO FT/tinder-0/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/peter/OneDrive/\\xC1rea de Trabalho/TRABALHO FT/tinder-0/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Chat from'./Chat';import ChatInput from'./ChatInput';import axios from'axios';import{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatDisplay=function ChatDisplay(_ref){var user=_ref.user,clickedUser=_ref.clickedUser;var userId=user===null||user===void 0?void 0:user.user_id;var clickedUserId=clickedUser===null||clickedUser===void 0?void 0:clickedUser.user_id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),usersMessages=_useState2[0],setUsersMessages=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),clickedUsersMessages=_useState4[0],setClickedUsersMessages=_useState4[1];var getUsersMessages=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('http://localhost:8000/messages',{params:{userId:userId,correspondingUserId:clickedUserId}});case 3:response=_context.sent;setUsersMessages(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getUsersMessages(){return _ref2.apply(this,arguments);};}();var getClickedUsersMessages=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get('http://localhost:8000/messages',{params:{userId:clickedUserId,correspondingUserId:userId}});case 3:response=_context2.sent;setClickedUsersMessages(response.data);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function getClickedUsersMessages(){return _ref3.apply(this,arguments);};}();useEffect(function(){getUsersMessages();getClickedUsersMessages();},[]);var messages=[];usersMessages===null||usersMessages===void 0?void 0:usersMessages.forEach(function(message){var formattedMessage={};formattedMessage['name']=user===null||user===void 0?void 0:user.first_name;formattedMessage['img']=user===null||user===void 0?void 0:user.url;formattedMessage['message']=message.message;formattedMessage['timestamp']=message.timestamp;messages.push(formattedMessage);});clickedUsersMessages===null||clickedUsersMessages===void 0?void 0:clickedUsersMessages.forEach(function(message){var formattedMessage={};formattedMessage['name']=clickedUser===null||clickedUser===void 0?void 0:clickedUser.first_name;formattedMessage['img']=clickedUser===null||clickedUser===void 0?void 0:clickedUser.url;formattedMessage['message']=message.message;formattedMessage['timestamp']=message.timestamp;messages.push(formattedMessage);});var descendingOrderMessages=messages===null||messages===void 0?void 0:messages.sort(function(a,b){return a.timestamp.localeCompare(b.timestamp);});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Chat,{descendingOrderMessages:descendingOrderMessages}),/*#__PURE__*/_jsx(ChatInput,{user:user,clickedUser:clickedUser,getUserMessages:getUsersMessages,getClickedUsersMessages:getClickedUsersMessages})]});};export default ChatDisplay;","map":{"version":3,"names":["Chat","ChatInput","axios","useState","useEffect","ChatDisplay","user","clickedUser","userId","user_id","clickedUserId","usersMessages","setUsersMessages","clickedUsersMessages","setClickedUsersMessages","getUsersMessages","get","params","correspondingUserId","response","data","console","log","getClickedUsersMessages","messages","forEach","message","formattedMessage","first_name","url","timestamp","push","descendingOrderMessages","sort","a","b","localeCompare"],"sources":["C:/Users/peter/OneDrive/Área de Trabalho/TRABALHO FT/tinder-0/client/src/components/ChatDisplay.js"],"sourcesContent":["import Chat from './Chat'\r\nimport ChatInput from './ChatInput'\r\nimport axios from 'axios'\r\nimport { useState, useEffect } from \"react\"\r\n\r\n\r\nconst ChatDisplay = ({ user, clickedUser }) => {\r\n    const userId = user?.user_id\r\n    const clickedUserId = clickedUser?.user_id\r\n    const [usersMessages, setUsersMessages] = useState(null)\r\n    const [clickedUsersMessages, setClickedUsersMessages] = useState(null)\r\n\r\n    const getUsersMessages = async () => {\r\n        try {\r\n            const response = await axios.get('http://localhost:8000/messages', {\r\n                params: { userId: userId, correspondingUserId: clickedUserId }\r\n            })\r\n            setUsersMessages(response.data)\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    const getClickedUsersMessages = async () => {\r\n        try {\r\n            const response = await axios.get('http://localhost:8000/messages', {\r\n                params: { userId: clickedUserId, correspondingUserId: userId }\r\n            })\r\n            setClickedUsersMessages(response.data)\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getUsersMessages()\r\n        getClickedUsersMessages()\r\n    }, [])\r\n\r\n    const messages = []\r\n\r\n    usersMessages?.forEach(message => {\r\n        const formattedMessage = {}\r\n        formattedMessage['name'] = user?.first_name\r\n        formattedMessage['img'] = user?.url\r\n        formattedMessage['message'] = message.message\r\n        formattedMessage['timestamp'] = message.timestamp\r\n        messages.push(formattedMessage)\r\n    })\r\n\r\n    clickedUsersMessages?.forEach(message => {\r\n        const formattedMessage = {}\r\n        formattedMessage['name'] = clickedUser?.first_name\r\n        formattedMessage['img'] = clickedUser?.url\r\n        formattedMessage['message'] = message.message\r\n        formattedMessage['timestamp'] = message.timestamp\r\n        messages.push(formattedMessage)\r\n    })\r\n\r\n    const descendingOrderMessages = messages?.sort((a, b) => a.timestamp.localeCompare(b.timestamp))\r\n\r\n    return (\r\n        <>\r\n            <Chat descendingOrderMessages={descendingOrderMessages} />\r\n            <ChatInput\r\n                user={user}\r\n                clickedUser={clickedUser} getUserMessages={getUsersMessages} getClickedUsersMessages={getClickedUsersMessages} />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ChatDisplay"],"mappings":"ueAAA,MAAOA,KAAI,KAAM,QAAQ,CACzB,MAAOC,UAAS,KAAM,aAAa,CACnC,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,8IAG3C,GAAMC,YAAW,CAAG,QAAdA,YAAW,MAA8B,IAAxBC,KAAI,MAAJA,IAAI,CAAEC,WAAW,MAAXA,WAAW,CACpC,GAAMC,OAAM,CAAGF,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEG,OAAO,CAC5B,GAAMC,cAAa,CAAGH,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEE,OAAO,CAC1C,cAA0CN,QAAQ,CAAC,IAAI,CAAC,wCAAjDQ,aAAa,eAAEC,gBAAgB,eACtC,eAAwDT,QAAQ,CAAC,IAAI,CAAC,yCAA/DU,oBAAoB,eAAEC,uBAAuB,eAEpD,GAAMC,iBAAgB,6FAAG,wLAEMb,MAAK,CAACc,GAAG,CAAC,gCAAgC,CAAE,CAC/DC,MAAM,CAAE,CAAET,MAAM,CAAEA,MAAM,CAAEU,mBAAmB,CAAER,aAAc,CACjE,CAAC,CAAC,QAFIS,QAAQ,eAGdP,gBAAgB,CAACO,QAAQ,CAACC,IAAI,CAAC,gFAE/BC,OAAO,CAACC,GAAG,aAAO,qEAEzB,kBATKP,iBAAgB,2CASrB,CAED,GAAMQ,wBAAuB,6FAAG,+LAEDrB,MAAK,CAACc,GAAG,CAAC,gCAAgC,CAAE,CAC/DC,MAAM,CAAE,CAAET,MAAM,CAAEE,aAAa,CAAEQ,mBAAmB,CAAEV,MAAO,CACjE,CAAC,CAAC,QAFIW,QAAQ,gBAGdL,uBAAuB,CAACK,QAAQ,CAACC,IAAI,CAAC,oFAEtCC,OAAO,CAACC,GAAG,cAAO,uEAEzB,kBATKC,wBAAuB,2CAS5B,CAEDnB,SAAS,CAAC,UAAM,CACZW,gBAAgB,EAAE,CAClBQ,uBAAuB,EAAE,CAC7B,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMC,SAAQ,CAAG,EAAE,CAEnBb,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEc,OAAO,CAAC,SAAAC,OAAO,CAAI,CAC9B,GAAMC,iBAAgB,CAAG,CAAC,CAAC,CAC3BA,gBAAgB,CAAC,MAAM,CAAC,CAAGrB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEsB,UAAU,CAC3CD,gBAAgB,CAAC,KAAK,CAAC,CAAGrB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEuB,GAAG,CACnCF,gBAAgB,CAAC,SAAS,CAAC,CAAGD,OAAO,CAACA,OAAO,CAC7CC,gBAAgB,CAAC,WAAW,CAAC,CAAGD,OAAO,CAACI,SAAS,CACjDN,QAAQ,CAACO,IAAI,CAACJ,gBAAgB,CAAC,CACnC,CAAC,CAAC,CAEFd,oBAAoB,SAApBA,oBAAoB,iBAApBA,oBAAoB,CAAEY,OAAO,CAAC,SAAAC,OAAO,CAAI,CACrC,GAAMC,iBAAgB,CAAG,CAAC,CAAC,CAC3BA,gBAAgB,CAAC,MAAM,CAAC,CAAGpB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEqB,UAAU,CAClDD,gBAAgB,CAAC,KAAK,CAAC,CAAGpB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEsB,GAAG,CAC1CF,gBAAgB,CAAC,SAAS,CAAC,CAAGD,OAAO,CAACA,OAAO,CAC7CC,gBAAgB,CAAC,WAAW,CAAC,CAAGD,OAAO,CAACI,SAAS,CACjDN,QAAQ,CAACO,IAAI,CAACJ,gBAAgB,CAAC,CACnC,CAAC,CAAC,CAEF,GAAMK,wBAAuB,CAAGR,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAES,IAAI,CAAC,SAACC,CAAC,CAAEC,CAAC,QAAKD,EAAC,CAACJ,SAAS,CAACM,aAAa,CAACD,CAAC,CAACL,SAAS,CAAC,GAAC,CAEhG,mBACI,wCACI,KAAC,IAAI,EAAC,uBAAuB,CAAEE,uBAAwB,EAAG,cAC1D,KAAC,SAAS,EACN,IAAI,CAAE1B,IAAK,CACX,WAAW,CAAEC,WAAY,CAAC,eAAe,CAAEQ,gBAAiB,CAAC,uBAAuB,CAAEQ,uBAAwB,EAAG,GACtH,CAEX,CAAC,CAED,cAAelB,YAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}