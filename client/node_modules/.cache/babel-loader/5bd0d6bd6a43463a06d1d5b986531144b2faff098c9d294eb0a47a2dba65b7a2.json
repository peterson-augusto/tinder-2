{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/peter/OneDrive/\\xC1rea de Trabalho/TRABALHO FT/tinder-0/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/peter/OneDrive/\\xC1rea de Trabalho/TRABALHO FT/tinder-0/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/peter/OneDrive/\\xC1rea de Trabalho/TRABALHO FT/tinder-0/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{useCookies}from'react-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AuthModal=function AuthModal(_ref){var setShowModal=_ref.setShowModal,isSignUp=_ref.isSignUp;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),confirmPassword=_useState6[0],setConfirmPassword=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useCookies=useCookies(null),_useCookies2=_slicedToArray(_useCookies,3),cookies=_useCookies2[0],setCookie=_useCookies2[1],removeCookie=_useCookies2[2];var navigate=useNavigate();var handleClick=function handleClick(){setShowModal(false);};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,success;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;if(!(isSignUp&&password!==confirmPassword)){_context.next=5;break;}setError('As senhas precisam ser iguais!');return _context.abrupt(\"return\");case 5:_context.next=7;return axios.post(\"http://localhost:8000/\".concat(isSignUp?'signup':'login'),{email:email,password:password});case 7:response=_context.sent;setCookie('AuthToken',response.data.token);setCookie('UserId',response.data.userId);success=response.status===201;if(success&&isSignUp)navigate('/onboarding');if(success&&!isSignUp)navigate('/dashboard');window.location.reload();_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[1,16]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"auth-modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"close-icon\",onClick:handleClick,children:\"\\u24E7\"}),/*#__PURE__*/_jsx(\"h2\",{children:isSignUp?'CRIAR UMA CONTA':'ENTRAR'}),/*#__PURE__*/_jsx(\"p\",{children:\"Ao clicar em Entre, voc\\xEA concorda com os nossos Termos. Saiba como processamos seus dados em nossa Pol\\xEDtica de Privacidade e Pol\\xEDtica de Cookies.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",placeholder:\"Email\",required:true,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",placeholder:\"Senha\",required:true,onChange:function onChange(e){return setPassword(e.target.value);}}),isSignUp&&/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password-check\",name:\"password-check\",placeholder:\"Confirme sua senha\",required:true,onChange:function onChange(e){return setConfirmPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"secondary-button\",type:\"submit\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h2\",{children:\"BAIXE O APLICATIVO!\"})]});};export default AuthModal;","map":{"version":3,"names":["useState","axios","useNavigate","useCookies","AuthModal","setShowModal","isSignUp","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","error","setError","cookies","setCookie","removeCookie","navigate","handleClick","handleSubmit","e","preventDefault","post","response","data","token","userId","success","status","window","location","reload","console","log","target","value"],"sources":["C:/Users/peter/OneDrive/Área de Trabalho/TRABALHO FT/tinder-0/client/src/components/AuthModal.js"],"sourcesContent":["import { useState } from 'react'\r\nimport axios from 'axios'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { useCookies } from 'react-cookie'\r\n\r\n\r\nconst AuthModal = ({ setShowModal, isSignUp }) => {\r\n    const [email, setEmail] = useState(null)\r\n    const [password, setPassword] = useState(null)\r\n    const [confirmPassword, setConfirmPassword] = useState(null)\r\n    const [error, setError] = useState(null)\r\n    const [cookies, setCookie, removeCookie] = useCookies(null)\r\n\r\n    let navigate = useNavigate()\r\n\r\n\r\n    const handleClick = () => {\r\n        setShowModal(false)\r\n    }\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        try {\r\n            if (isSignUp && (password !== confirmPassword)) {\r\n                setError('As senhas precisam ser iguais!')\r\n                return\r\n            }\r\n\r\n            const response = await axios.post(`http://localhost:8000/${isSignUp ? 'signup' : 'login'}`, { email, password })\r\n\r\n            setCookie('AuthToken', response.data.token)\r\n            setCookie('UserId', response.data.userId)\r\n\r\n            const success = response.status === 201\r\n            if (success && isSignUp) navigate('/onboarding')\r\n            if (success && !isSignUp) navigate('/dashboard')\r\n\r\n            window.location.reload()\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"auth-modal\">\r\n            <div className=\"close-icon\" onClick={handleClick}>ⓧ</div>\r\n\r\n            <h2>{isSignUp ? 'CRIAR UMA CONTA' : 'ENTRAR'}</h2>\r\n            <p>Ao clicar em Entre, você concorda com os nossos Termos. Saiba como processamos seus dados em nossa Política de Privacidade e Política de Cookies.</p>\r\n            <form onSubmit={handleSubmit}>\r\n                <input\r\n                    type=\"email\"\r\n                    id=\"email\"\r\n                    name=\"email\"\r\n                    placeholder=\"Email\"\r\n                    required={true}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                />\r\n                <input\r\n                    type=\"password\"\r\n                    id=\"password\"\r\n                    name=\"password\"\r\n                    placeholder=\"Senha\"\r\n                    required={true}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                />\r\n                {isSignUp && <input\r\n                    type=\"password\"\r\n                    id=\"password-check\"\r\n                    name=\"password-check\"\r\n                    placeholder=\"Confirme sua senha\"\r\n                    required={true}\r\n                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n                />}\r\n                <input className=\"secondary-button\" type=\"submit\" />\r\n                <p>{error}</p>\r\n            </form>\r\n\r\n            <hr />\r\n            <h2>BAIXE O APLICATIVO!</h2>\r\n\r\n        </div>\r\n    )\r\n}\r\nexport default AuthModal"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}